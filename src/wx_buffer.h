//=============================================================================
// Auxiliary library for Windows API (C++)
//                                                     Copyright (c) 2007 MAYO.
//=============================================================================
#pragma once

namespace wx {

//-----------------------------------------------------------------------------
//! @class	Buffer
//! @brief	メモリバッファ
//-----------------------------------------------------------------------------
class Buffer
{
public:
	//-------------------------------------------------------------------------
	//! @brief	コンストラクタ
	//-------------------------------------------------------------------------
	Buffer();

	//-------------------------------------------------------------------------
	//! @brief	デストラクタ
	//-------------------------------------------------------------------------
	~Buffer();

	//-------------------------------------------------------------------------
	//! @brief	バッファ確保
	//!
	//! @param	size		バッファサイズ
	//!
	//! @retval	true		バッファ確保成功
	//! @retval	false		バッファ確保失敗
	//-------------------------------------------------------------------------
	bool Initialize(UINT size);

	//-------------------------------------------------------------------------
	//! @brief	バッファ解放
	//-------------------------------------------------------------------------
	void Finalize();

	//-------------------------------------------------------------------------
	//! @brief	バッファのメモリポインタ取得
	//!
	//! @return	メモリポインタ
	//-------------------------------------------------------------------------
	void* GetData();

	//-------------------------------------------------------------------------
	//! @brief	バッファのサイズ取得
	//!
	//! @return	バッファサイズ
	//-------------------------------------------------------------------------
	UINT GetSize() const;

	//-------------------------------------------------------------------------
	//! @brief	バッファのクリア
	//-------------------------------------------------------------------------
	void Clear();

	//-------------------------------------------------------------------------
	//! @brief	バッファ全体を指定の値で埋める
	//!
	//! @param	value		埋める値
	//-------------------------------------------------------------------------
	void Fill(BYTE value);

	//-------------------------------------------------------------------------
	//! @brief	指定範囲を指定の値で埋める
	//!
	//! @param	size		埋めるバイト数
	//! @param	value		埋める値
	//-------------------------------------------------------------------------
	void Fill(UINT size, BYTE value);

	//-------------------------------------------------------------------------
	//! @brief	指定バッファに指定バイト数分コピーする
	//!
	//! @param	dest		コピー先バッファ [OUT]
	//! @param	size		バイト数
	//-------------------------------------------------------------------------
	void CopyTo(void* dest, UINT size) const;

private:
	void*	m_data;
	UINT	m_size;
};

} //namespace wx
